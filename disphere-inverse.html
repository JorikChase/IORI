<!doctype html>
<html>
    <meta charset="utf-8" />
    <meta
        name="viewport"
        content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <link
        rel="icon"
        type="image/x-icon"
        href="/images/sites/iori/3die.ico"
    />
    <link
        type="text/css"
        rel="stylesheet"
        href="/images/sites/iori/assets/main.css"
    />
    <link
        type="text/css"
        rel="stylesheet"
        href="/images/sites/iori/assets/burger.css"
    />

        <style>
            body {
                margin: 0;
            }
            canvas {
                display: block;
            }
        </style>
    </head>
    <body>
        <script
            async
            src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"
        ></script>

        <script type="importmap">
            {
                "imports": {
                    "three": "https://threejs.org/build/three.module.js",
                    "three/addons/": "https://threejs.org/examples/jsm/"
                }
            }
        </script>
        <script type="module">
                    import * as THREE from "three";
                    import { OrbitControls } from "three/addons/controls/OrbitControls.js";

                    // Scene setup
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({ antialias: true });
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.setClearColor(0x000000);
                    document.body.appendChild(renderer.domElement);

                    // Create rainbow texture for sphere
                    const createRainbowTexture = () => {
                        const canvas = document.createElement("canvas");
                        canvas.width = 1024;
                        canvas.height = 512;
                        const ctx = canvas.getContext("2d");

                        const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
                        gradient.addColorStop(0, "#FF0000");
                        gradient.addColorStop(0.16, "#FF7F00");
                        gradient.addColorStop(0.32, "#FFFF00");
                        gradient.addColorStop(0.48, "#00FF00");
                        gradient.addColorStop(0.64, "#0000FF");
                        gradient.addColorStop(0.80, "#4B0082");
                        gradient.addColorStop(1, "#8F00FF");

                        ctx.fillStyle = gradient;
                        ctx.fillRect(0, 0, canvas.width, canvas.height);

                        return new THREE.CanvasTexture(canvas);
                    };

                    // Create dark environment texture
                    const createDarkEnvironment = () => {
                        const canvas = document.createElement("canvas");
                        canvas.width = 256;
                        canvas.height = 256;
                        const ctx = canvas.getContext("2d");
                        ctx.fillStyle = "#111111";
                        ctx.fillRect(0, 0, 256, 256);

                        const texture = new THREE.CanvasTexture(canvas);
                        texture.mapping = THREE.EquirectangularReflectionMapping;
                        return texture;
                    };

                    // Set up environment
                    scene.environment = createDarkEnvironment();

                    // Sphere material with rainbow colors
                    const material = new THREE.MeshStandardMaterial({
                        map: createRainbowTexture(),
                        metalness: 0.3,
                        roughness: 0.4,
                    });

                    // Create sphere
                    const geometry = new THREE.SphereGeometry(5, 64, 64);
                    const sphere = new THREE.Mesh(geometry, material);
                    scene.add(sphere);

                    // Add lights
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
                    scene.add(ambientLight);

                    const pointLight = new THREE.PointLight(0xffffff, 1.5);
                    pointLight.position.set(10, 10, 10);
                    scene.add(pointLight);

                    // Position camera
                    camera.position.z = 15;

                    // Add orbit controls
                    const controls = new OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;

                    // Handle window resize
                    window.addEventListener("resize", () => {
                        camera.aspect = window.innerWidth / window.innerHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(window.innerWidth, window.innerHeight);
                    });

                    // Animation loop
                    function animate() {
                        requestAnimationFrame(animate);
                        controls.update();
                        sphere.rotation.y += 0.005;
                        renderer.render(scene, camera);
                    }

                    animate();
                </script>
            </body>
        </html>
